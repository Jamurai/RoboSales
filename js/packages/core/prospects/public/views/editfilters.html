<section data-ng-controller="FiltersController" data-ng-init="findOne()">

<form class="form-horizontal" name="filterForm" role="form"  data-ng-submit="update(filterForm.$valid)">
  <div class="form-group row">
    <div class="col-md-12 col-md-offset-6">
      <button type="submit" class="btn btn-primary">Save</button>
      <a href="#!/contacts"><button type="submit" class="btn btn-danger"> Cancel</button></a>
      <a href="" data-ng-click="remove(filter);"><button class="btn btn-danger">Delete</button></a>
    </div>
  </div>

  <div class="form-group row small-box">
    <label class="label-default col-md-12">Step 1: Enter Filter Name</label>
    <div class="medium-box">
      <div class="col-md-6">

        <label for="filtername" class="col-sm-3 control-label">Filter Name</label>
        <div class="col-sm-9" ng-class="{ 'has-error' : submitted && filterForm.filtername.$invalid }">
          <input name="filtername" data-ng-model="filter.name" type="text" class="form-control"  placeholder="Name" required>
          <div ng-show="submitted && filterForm.filtername.$invalid" class="help-block">
            <p ng-show="filterForm.filtername.$error.required">Name is required</p>
          </div>
        </div>
      </div>
  </div>
  </div>

  <div class="form-group row medium-box">
    <label class="label-default col-md-12">Step 2: Filter by Additional Fields</label>
    <div class="medium-box">
      <table class="table table-hovered">
          <thead>
            <tr>
                <th>Field</th>
                <th>Operator</th>
                <th>Value</th>

            </tr>
        </thead>
        <tbody>
          <tr ng-repeat="option in filter.filterset">
            <td>
                <ui-select ng-model="option.field" theme="bootstrap" ng-disabled="disabled" >
                <ui-select-match placeholder="Select Field">{{$select.selected}}</ui-select-match>
                <ui-select-choices repeat="field in fields">
                <span ng-bind-html="field"></span>
                </ui-select-choices>
                </ui-select>
           </td>
           <td ng-required='option.field'>
              <ui-select ng-model="option.operator" theme="bootstrap" ng-disabled="disabled">
              <ui-select-match placeholder="Select Operator">{{$select.selected}}</ui-select-match>
              <ui-select-choices repeat="operator in operators">
               <span ng-bind-html="operator"></span>
               </ui-select-choices>
              </ui-select>
            </td>

            <td>
              <input name="{{$index}}-value" type="text" ng-model="option.value" class="form-control" id="value" placeholder="value"  ng-required='option.field' >

            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</form>
</section>
